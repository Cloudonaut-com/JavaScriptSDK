!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).cloudonaut={})}(this,(function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,r=p(t);if(e){var i=p(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return s(this,a)}}var h=function t(a){e(this,t),a=a||{},this.level=a.level||0,this.leaderboardID=a.leaderboardID||0,this.startDate=a.startDate||"",this.endDate=a.endDate||"",this.periodicity=a.periodicity||"",this.function=a.function||"MAX",this.sort=a.sort||""},l=function(t){i(r,t);var a=c(r);function r(t,i,p,n,s,c){var h;return e(this,r),(h=a.call(this,s)).appID=t,h.appSecret=i,h.controller="Leaderboard",h.action="List",h.page=c.page||1,h.limit=c.limit||0,h.playerID=p,h.characterID=n,h}return r}(h),o=function(t){i(r,t);var a=c(r);function r(t,i,p){var n;return e(this,r),(n=a.call(this,p)).appID=t,n.appSecret=i,n.controller="Leaderboard",n.action="Count",n}return r}(h),u=function(t){i(r,t);var a=c(r);function r(t,i,p,n,s){var c;return e(this,r),(c=a.call(this,n)).appID=t,c.appSecret=i,c.controller="Leaderboard",c.action="ListFriends",c.page=s.page||1,c.limit=s.limit||0,c.playerID=p.playerID,c.playerSecret=p.playerSecret,c}return r}(h),y=function(t){i(r,t);var a=c(r);function r(t,i,p,n){var s;return e(this,r),(s=a.call(this,n)).appID=t,s.appSecret=i,s.controller="Leaderboard",s.action="CountFriends",s.playerID=p.playerID,s.playerSecret=p.playerSecret,s}return r}(h),f=function(t){i(r,t);var a=c(r);function r(t,i,p,n,s,c){var h;return e(this,r),(h=a.call(this,s)).appID=t,h.appSecret=i,h.controller="Leaderboard",h.action="Add",h.playerID=p.playerID,h.playerSecret=p.playerSecret,h.characterID=n,h.score=c,h}return r}(h),D=function(t){i(r,t);var a=c(r);function r(t,i,p,n,s){var c;return e(this,r),(c=a.call(this,s)).appID=t,c.appSecret=i,c.controller="Leaderboard",c.action="Get",c.playerID=p,c.characterID=n,c}return r}(h),v=function t(a){e(this,t),a=a||{},this.latitude=a.latitude||a.lat||"",this.longitude=a.longitude||a.long||""},I=function t(a){e(this,t),a=a||{},this.limit=a.limit||0,this.page=a.page||1},d=function t(a){e(this,t),a=a||{},this.providerUID=a.providerUID||"",this.playerID=a.playerID||0,this.playerSecret=a.playerSecret||"",this.displayName=a.displayName||"",this.displayNameExtra=a.displayNameExtra||"",this.avatar=""},S=function t(a){e(this,t),a=a||{},this.characterID=a.characterID||0,this.characterName=a.characterName||"",this.characterNameExtra=a.characterNameExtra||"",this.characterAvatar=a.characterAvatar||""},m=function t(a,r,i){e(this,t),this.appID=a,this.appSecret=r,this.controller="Auth",this.action="Authenticate",this.providerUID=i.providerUID,this.displayName=i.displayName,this.displayNameExtra=i.displayNameExtra},C=function(t){i(r,t);var a=c(r);function r(t,i,p){var n;return e(this,r),(n=a.call(this,t,i,p)).provider=0,n}return r}(m),A=function(t){i(r,t);var a=c(r);function r(t,i,p){var n;return e(this,r),(n=a.call(this,t,i,p)).provider=1,n.playerID=p.playerID,n.playerSecret=p.playerSecret,n}return r}(m),P=function(t){i(r,t);var a=c(r);function r(t,i,p){var n;return e(this,r),(n=a.call(this,t,i,p)).provider=2,n.playerID=p.playerID,n.playerSecret=p.playerSecret,n}return r}(m),k=function(){function t(a){e(this,t),this.api=a}return r(t,[{key:"ApiCall",value:function(t){return fetch(this.api.url,{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(t){if(!t.ok||200!==t.status)throw Error(t.statusText);return t.json()})).catch((function(t){throw t}))}}]),t}(),g=function(t){i(p,t);var a=c(p);function p(t){return e(this,p),a.call(this,t)}return r(p,[{key:"Anonymous",value:function(t){var e=this;this.api.player.providerUID=t||this.api.player.providerUID;var a=new C(this.api.appID,this.api.appSecret,this.api.player);return this.ApiCall(a).then((function(t){return t.success&&(e.api.player.playerID=t.player.playerID,e.api.player.providerUID=t.player.providerUID,e.api.player.playerSecret=t.player.playerSecret,e.api.player.displayName=t.player.displayName,e.api.player.displayNameExtra=t.player.displayNameExtra),t}))}},{key:"WithFacebook",value:function(t){var e=this;this.api.player.playerSecret=t||this.api.player.playerSecret;var a=new A(this.api.appID,this.api.appSecret,this.api.player);return this.ApiCall(a).then((function(t){return t.success&&(e.api.player.playerID=t.player.playerID,e.api.player.providerUID=t.player.providerUID,e.api.player.playerSecret=t.player.playerSecret,e.api.player.displayName=t.player.displayName,e.api.player.displayNameExtra=t.player.displayNameExtra),t}))}},{key:"WithFirebase",value:function(t){var e=this;this.api.player.playerSecret=t||this.api.player.playerSecret;var a=new P(this.api.appID,this.api.appSecret,this.api.player);return this.ApiCall(a).then((function(t){return t.success&&(e.api.player.playerID=t.player.playerID,e.api.player.providerUID=t.player.providerUID,e.api.player.playerSecret=t.player.playerSecret,e.api.player.displayName=t.player.displayName,e.api.player.displayNameExtra=t.player.displayNameExtra),t}))}}]),p}(k),w=function(t){i(p,t);var a=c(p);function p(t){var r;return e(this,p),(r=a.call(this,t)).settings=new h({}),r.paging=new I({}),r}return r(p,[{key:"ListScores",value:function(t){t=(t=t||{})instanceof I?t:this.paging;var e=new l(this.api.appID,this.api.appSecret,0,0,this.settings,t);return this.ApiCall(e)}},{key:"ListScoresAroundMe",value:function(t){t=(t=t||{})instanceof I?t:this.paging;var e=new l(this.api.appID,this.api.appSecret,this.api.player.playerID,this.api.character.characterID,this.settings,t);return this.ApiCall(e)}},{key:"ListScoresAroundPlayer",value:function(t,e,a){a=(a=a||{})instanceof I?a:this.paging,t=t||0,e=e||0;var r=new l(this.api.appID,this.api.appSecret,t,e,this.settings,a);return this.ApiCall(r)}},{key:"CountScores",value:function(){var t=new o(this.api.appID,this.api.appSecret,this.settings);return this.ApiCall(t)}},{key:"ListScoresOfFriends",value:function(t){t=(t=t||{})instanceof I?t:this.paging;var e=new u(this.api.appID,this.api.appSecret,this.api.player,this.settings,t);return this.ApiCall(e)}},{key:"CountScoresOfFriends",value:function(){var t=new y(this.api.appID,this.api.appSecret,this.api.player,this.settings);return this.ApiCall(t)}},{key:"GetScore",value:function(){var t=new D(this.api.appID,this.api.appSecret,this.api.player.playerID,this.api.character.characterID,this.settings);return this.ApiCall(t)}},{key:"GetScoreOfPlayer",value:function(t,e){t=t||0,e=e||0;var a=new D(this.api.appID,this.api.appSecret,t,e,this.settings);return this.ApiCall(a)}},{key:"AddScore",value:function(t){if(null===(t=parseFloat(t)||null))return Promise.reject("Provide a score");var e=new f(this.api.appID,this.api.appSecret,this.api.player,this.api.character.characterID,this.settings,t);return this.ApiCall(e)}}]),p}(k),N=function t(a,r,i,p){e(this,t),this.appID=a,this.appSecret=r,this.controller="Friends",this.action="Add",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.friendID=p},b=function t(a,r,i,p){e(this,t),this.appID=a,this.appSecret=r,this.controller="Friends",this.action="AddFromFacebook",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.friendList=p},x=function t(a,r,i,p){e(this,t),this.appID=a,this.appSecret=r,this.controller="Friends",this.action="Remove",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.friendID=p},j=function t(a,r,i,p){e(this,t),this.appID=a,this.appSecret=r,this.controller="Friends",this.action="List",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.page=p.page||1,this.limit=p.limit||0},G=function t(a,r,i){e(this,t),this.appID=a,this.appSecret=r,this.controller="Friends",this.action="Count",this.playerID=i.playerID,this.playerSecret=i.playerSecret},E=function(t){i(p,t);var a=c(p);function p(t,r){var i;return e(this,p),r=r||{},(i=a.call(this,t)).paging=new I(r),i}return r(p,[{key:"AddFriend",value:function(t){if(null===(t=parseInt(t)||null))return Promise.reject("Provide a friendID");var e=new N(this.api.appID,this.api.appSecret,this.api.player,t);return this.ApiCall(e)}},{key:"RemoveFriend",value:function(t){if(null===(t=parseInt(t)||null))return Promise.reject("Provide a friendID");var e=new x(this.api.appID,this.api.appSecret,this.api.player,t);return this.ApiCall(e)}},{key:"AddFriendsFromFacebook",value:function(t){if(Array.isArray(t)){var e=new b(this.api.appID,this.api.appSecret,this.api.player,t);return this.ApiCall(e)}return Promise.reject("friendList must be of type array!")}},{key:"ListFriends",value:function(t){t=(t=t||{})instanceof I?t:this.paging;var e=new j(this.api.appID,this.api.appSecret,this.api.player,t);return this.ApiCall(e)}},{key:"CountFriends",value:function(){var t=new G(this.api.appID,this.api.appSecret,this.api.player);return this.ApiCall(t)}}]),p}(k),L=function(t){i(p,t);var a=c(p);function p(t){return e(this,p),a.call(this,t)}return r(p,[{key:"GetDistance",value:function(t,e,a){if(a=a||"",t instanceof v&&e instanceof v){var r={appID:this.api.appID,appSecret:this.api.appSecret,controller:"CF",action:"GetDistance",latitude1:t.latitude,latitude2:e.latitude,longitude1:t.longitude,longitude2:e.longitude,unit:a};return this.ApiCall(r)}return Promise.reject("Failed api call")}},{key:"GetRandomString",value:function(){var t={appID:this.api.appID,appSecret:this.api.appSecret,controller:"CF",action:"GetRandomString"};return this.ApiCall(t)}},{key:"GetGUID",value:function(){var t={appID:this.api.appID,appSecret:this.api.appSecret,controller:"CF",action:"GetGUID"};return this.ApiCall(t)}}]),p}(k),F=function t(a,r,i,p){e(this,t),this.appID=a,this.appSecret=r,this.controller="Character",this.action="Add",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.characterName=p.characterName,this.characterNameExtra=p.characterNameExtra,this.characterAvatar=p.characterAvatar},O=function t(a,r,i,p){e(this,t),this.appID=a,this.appSecret=r,this.controller="Character",this.action="Update",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.characterID=p.characterID,this.characterName=p.characterName,this.characterNameExtra=p.characterNameExtra,this.characterAvatar=p.characterAvatar},U=function t(a,r,i,p){e(this,t),this.appID=a,this.appSecret=r,this.controller="Character",this.action="Get",this.playerID=i,this.characterID=p},R=function t(a,r,i,p){e(this,t),this.appID=a,this.appSecret=r,this.controller="Character",this.action="List",this.playerID=i,this.page=p.page,this.limit=p.limit},_=function t(a,r,i){e(this,t),this.appID=a,this.appSecret=r,this.controller="Character",this.action="Count",this.playerID=i},K=function(t){i(p,t);var a=c(p);function p(t){var r;return e(this,p),(r=a.call(this,t)).paging=new I({}),r}return r(p,[{key:"AddCharacter",value:function(t){if(!((t=t||{})instanceof S))return Promise.reject("Provide a character");if(0!=t.characterID)return Promise.reject("Provide a new character. CharacterID must be 0");var e=new F(this.api.appID,this.api.appSecret,this.api.player,t);return this.ApiCall(e)}},{key:"UpdateCharacter",value:function(t){(t=t||{})instanceof S||(t=this.api.character);var e=new O(this.api.appID,this.api.appSecret,this.api.player,t);return this.ApiCall(e)}},{key:"GetCharacter",value:function(t){t=t||this.api.character.characterID;var e=new U(this.api.appID,this.api.appSecret,this.api.player.playerID,t);return this.ApiCall(e)}},{key:"SetCharacter",value:function(t){var e=this;if(0==(t=t||0)){this.api.character.characterID=0,this.api.character.characterName="",this.api.character.characterNameExtra="",this.api.character.characterAvatar="";return Promise.resolve({success:!0})}var a=new U(this.api.appID,this.api.appSecret,this.api.player.playerID,t);return this.ApiCall(a).then((function(t){return t.success&&(e.api.character.characterID=t.character.characterID,e.api.character.characterName=t.character.characterName,e.api.character.characterNameExtra=t.character.characterNameExtra,e.api.character.characterAvatar=t.character.characterAvatar),t}))}},{key:"GetCharacterOfPlayer",value:function(t,e){t=t||this.api.player.playerID,e=e||this.api.character.characterID;var a=new U(this.api.appID,this.api.appSecret,t,e);return this.ApiCall(a)}},{key:"ListCharacters",value:function(t){t=(t=t||{})instanceof I?t:this.paging;var e=new R(this.api.appID,this.api.appSecret,this.api.player.playerID,t);return this.ApiCall(e)}},{key:"CountCharacters",value:function(){var t=new _(this.api.appID,this.api.appSecret,this.api.player.playerID);return this.ApiCall(t)}},{key:"ListCharactersOfPlayer",value:function(t,e){t=t||this.api.player.playerID,e=(e=e||{})instanceof I?e:this.paging;var a=new R(this.api.appID,this.api.appSecret,t,e);return this.ApiCall(a)}},{key:"CountCharactersOfPlayer",value:function(t){t=t||this.api.player.playerID;var e=new _(this.api.appID,this.api.appSecret,t);return this.ApiCall(e)}}]),p}(k),T=function t(a,r,i){e(this,t),this.appID=a,this.appSecret=r,this.controller="PlayerProfile",this.action="Update",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.displayName=i.displayName,this.displayNameExtra=i.displayNameExtra,this.avatar=i.avatar},M=function t(a,r,i){e(this,t),this.appID=a,this.appSecret=r,this.controller="PlayerProfile",this.action="Get",this.playerID=i},W=function t(a,r,i,p){e(this,t),this.appID=a,this.appSecret=r,this.controller="PlayerProfile",this.action="List",this.playerList=i,this.page=p.page||1,this.limit=p.limit||0},B=function t(a,r,i,p){e(this,t),this.appID=a,this.appSecret=r,this.controller="PlayerProfile",this.action="Search",this.search=i,this.page=p.page||1,this.limit=p.limit||0},J=function(t){i(p,t);var a=c(p);function p(t,r){var i;return e(this,p),r=r||{},(i=a.call(this,t)).paging=new I(r),i}return r(p,[{key:"UpdateProfile",value:function(){var t=new T(this.api.appID,this.api.appSecret,this.api.player);return this.ApiCall(t)}},{key:"GetProfile",value:function(){var t=new M(this.api.appID,this.api.appSecret,this.api.player.playerID);return this.ApiCall(t)}},{key:"GetProfileOfPlayer",value:function(t){t=t||this.api.player.playerID;var e=new M(this.api.appID,this.api.appSecret,t);return this.ApiCall(e)}},{key:"ListProfilesOfPlayers",value:function(t,e){if(Array.isArray(t)){e=(e=e||{})instanceof I?e:this.paging;var a=new W(this.api.appID,this.api.appSecret,t,e);return this.ApiCall(a)}return Promise.reject("playerList must be of type array!")}},{key:"Search",value:function(t,e){e=(e=e||{})instanceof I?e:this.paging,t=t||"";var a=new B(this.api.appID,this.api.appSecret,t,e);return this.ApiCall(a)}}]),p}(k),X=function(t){i(p,t);var a=c(p);function p(t){return e(this,p),a.call(this,t)}return r(p,[{key:"GetName",value:function(){return 0==this.api.character.characterID||""==this.api.character.characterName?this.api.player.displayName:this.api.character.characterName}},{key:"GetNameExtra",value:function(){return 0==this.api.character.characterID||""==this.api.character.characterNameExtra?this.api.player.displayNameExtra:this.api.character.characterNameExtra}},{key:"GetAvatar",value:function(){return 0==this.api.character.characterID||""==this.api.character.characterAvatar?this.api.player.avatar:this.api.character.characterAvatar}}]),p}(k),q=function t(a,r,i,p,n){e(this,t),this.appID=a,this.appSecret=r,this.controller="CloudData",this.action="SetAppData",this.dataKey=i,this.value=p,this.writeLock=n,this.privacy=0},z=function t(a,r,i){e(this,t),this.appID=a,this.appSecret=r,this.controller="CloudData",this.action="GetAppData",this.dataKey=i},H=function t(a,r,i,p,n,s,c,h){e(this,t),this.appID=a,this.appSecret=r,this.controller="CloudData",this.action="SetPlayerData",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.characterID=p,this.dataKey=n,this.value=s,this.writeLock=c,this.privacy=h},Q=function t(a,r,i,p,n){e(this,t),this.appID=a,this.appSecret=r,this.controller="CloudData",this.action="GetPlayerData",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.characterID=p,this.dataKey=n},V=function t(a,r,i,p,n){e(this,t),this.appID=a,this.appSecret=r,this.controller="CloudData",this.action="GetPlayerDataByID",this.playerID=i,this.characterID=p,this.dataKey=n},Y=function(t){i(p,t);var a=c(p);function p(t){return e(this,p),a.call(this,t)}return r(p,[{key:"SetAppData",value:function(t,e,a){if(e=e||"",a=a||0,""===(t=t||""))return Promise.reject("Provide a key");var r=new q(this.api.appID,this.api.appSecret,t,e,a);return this.ApiCall(r)}},{key:"GetAppData",value:function(t){if(""===(t=t||""))return Promise.reject("Provide a key");var e=new z(this.api.appID,this.api.appSecret,t);return this.ApiCall(e)}},{key:"SetData",value:function(t,e,a,r){if(e=e||"",a=a||0,r=r||-1,""===(t=t||""))return Promise.reject("Provide a key");var i=new H(this.api.appID,this.api.appSecret,this.api.player,this.api.character.characterID,t,e,a,r);return this.ApiCall(i)}},{key:"SetCharacterData",value:function(t,e,a,r,i){if(e=e||0,a=a||"",r=r||0,i=i||-1,""===(t=t||""))return Promise.reject("Provide a key");var p=new H(this.api.appID,this.api.appSecret,this.api.player,e,t,a,r,i);return this.ApiCall(p)}},{key:"SetPlayerData",value:function(t,e,a,r){if(e=e||"",a=a||0,r=r||-1,""===(t=t||""))return Promise.reject("Provide a key");var i=new H(this.api.appID,this.api.appSecret,this.api.player,0,t,e,a,r);return this.ApiCall(i)}},{key:"GetData",value:function(t){if(""===(t=t||""))return Promise.reject("Provide a key");var e=new Q(this.api.appID,this.api.appSecret,this.api.player,this.api.character.characterID,t);return this.ApiCall(e)}},{key:"GetCharacterData",value:function(t,e){if(e=e||0,""===(t=t||""))return Promise.reject("Provide a key");var a=new Q(this.api.appID,this.api.appSecret,this.api.player,e,t);return this.ApiCall(a)}},{key:"GetPlayerData",value:function(t){if(""===(t=t||""))return Promise.reject("Provide a key");var e=new Q(this.api.appID,this.api.appSecret,this.api.player,0,t);return this.ApiCall(e)}},{key:"GetCharacterDataOfPlayer",value:function(t,e,a){if(a=a||0,t=t||"",0===(e=e||0))return Promise.reject("Provide a player ID");if(""===t)return Promise.reject("Provide a key");var r=new V(this.api.appID,this.api.appSecret,e,a,t);return this.ApiCall(r)}},{key:"GetPlayerDataOfPlayer",value:function(t,e){if(t=t||"",0===(e=e||0))return Promise.reject("Provide a player ID");if(""===t)return Promise.reject("Provide a key");var a=new V(this.api.appID,this.api.appSecret,e,0,t);return this.ApiCall(a)}}]),p}(k),Z=function(){function t(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e(this,t),this.appID=a,this.appSecret=r,this.player=new d,this.character=new S,this.url="https://api01.cloudonaut.com/index.php"}return r(t,[{key:"Auth",value:function(){return new g(this)}},{key:"CF",value:function(){return new L(this)}},{key:"Friend",value:function(){return new E(this)}},{key:"Leaderboard",value:function(){return new w(this)}},{key:"Character",value:function(){return new K(this)}},{key:"PlayerProfile",value:function(){return new J(this)}},{key:"Player",value:function(){return new X(this)}},{key:"CloudData",value:function(){return new Y(this)}}]),t}();t.API=Z,t.Character=S,t.CloudData=function t(a){e(this,t),a=a||{},this.dataKey=a.dataKey||"",this.value=a.value||0,this.privacy=a.privacy||1,this.writeLock=a.writeLock||0},t.GeoPoint=v,t.Leaderboard=h,t.Paging=I,t.Player=d}));
//# sourceMappingURL=cloudonaut.min.js.map
